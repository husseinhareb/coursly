{% extends 'base.html.twig' %}

{% block title %}{{ 'home.title'|trans }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/home.css') }}">
{% endblock %}

{% block body %}
<main class="main-content">
    {% if app.user %}
        <h1 class="welcome-heading">
            {{ 'home.hello'|trans({'%name%': app.user.firstName}) }}
        </h1>
        <p class="user-detail">
            {{ 'home.email'|trans({'%email%': app.user.userIdentifier}) }}
        </p>
        <p class="user-detail">
            {{ 'home.role'|trans({'%role%': app.user.roles|join(', ')}) }}
        </p>

        {% if recentCourses is defined and recentCourses|length > 0 %}
            <section class="recent-courses">
                <h2>{{ 'home.recent_courses_heading'|trans }}</h2>
                <ul class="course-list">
                    {% for course in recentCourses %}
                        <li>
                            <a href="{{ path('courses_show', { id: course.id, code: course.code }) }}">
                                {{ course.title }} ({{ course.code }})
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </section>
        {% else %}
            <p class="no-recent-courses">
                {{ 'home.no_recent_courses'|trans }}
            </p>
        {% endif %}
    {% else %}
        <h1 class="welcome-heading">
            {{ 'home.welcome'|trans }}
        </h1>
        <p class="login-prompt">
            {{ 'home.login_prompt'|trans }}
        </p>
    {% endif %}
</main>
{% endblock %}
