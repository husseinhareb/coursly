{% extends 'base.html.twig' %}

{% block title %}Mes Cours{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/cours.css') }}">
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1 class="text-center mb-4">Mes Cours</h1>

    <!-- Champ de recherche -->
    <div class="mb-4">
        <input type="text" id="search" class="form-control" placeholder="Rechercher un cours...">
    </div>

    <!-- Affichage des cours sous forme de cartes -->
    <div class="cours-container">
        {% for cour in cours %}
            {% set color = colors[loop.index0 % colors|length] %}
            <div class="cours-card">
                <div class="cours-header" style="background-color: {{ color }};"></div>
                <div class="cours-body">
                    <h5 class="cours-title">
                        <a href="{{ path('cours.show', { id: cour.getId(), slug: cour.getSlug() }) }}">
                            {{ cour.getTitre() }}
                        </a>
                    </h5>
                    <p class="cours-subtitle">{{ cour.getSlug() }}</p>
                </div>
            </div>
        {% else %}
            <p class="text-center">Aucun cours disponible.</p>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    let searchInput = document.getElementById("search");

    searchInput.addEventListener("input", function () {
        let query = this.value.toLowerCase().trim();
        let cards = document.querySelectorAll(".cours-card");

        cards.forEach(card => {
            let title = card.querySelector(".cours-title").innerText.toLowerCase();
            card.style.display = title.includes(query) ? "block" : "none";
        });
    });
});
</script>

{% endblock %}
